extends ../layout

block content
  .container
    h2 Tickets
    p.lead
      | Esta es la lista de los tickets más recientes. Clickeá el botón "Llamar cliente" para iniciar una llamada telefónica a través del navegador.
    .row
      .col-md-4.col-md-push-8
        .panel.panel-primary.client-controls
          .panel-heading
            h3.panel-title Llamada
          .panel-body
            p
              strong Estado
            #call-status.well.well-sm
              | Conectándose con servidor...
            button.btn.btn-lg.btn-success.answer-button(disabled="") Atender
            button.btn.btn-lg.btn-danger.hangup-button(disabled="", onclick="hangUp()") Colgar
      .col-md-8.col-md-pull-4
        each ticket in tickets
          .panel.panel-default
            .panel-heading
              h3.panel-title
                | Ticket #!{ticket.id}
                small.pull-right !{ticket.createdAt.toLocaleString('es-MX', { hour12: false })}
            .panel-body
              .pull-right
                button.btn.btn-primary.btn-lg.call-customer-button(onclick="callCustomer('#{ticket.phoneNumber}')", type="button")
                  span.glyphicon.glyphicon-earphone(aria-hidden="true")
                  |  Llamar cliente
              p
                strong Nombre:
                |  !{ticket.name}
              p
                strong Número de teléfono:
                |  !{ticket.phoneNumber}
              p
                strong Descripción:
              |  !{ticket.description}
        

    
